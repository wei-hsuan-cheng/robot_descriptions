<?xml version="1.0" encoding="utf-8"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">

	<xacro:macro name="OpenArm" params="name direction:=1">
		<xacro:property name="prefix" value="${name + '_' if name else ''}"/>

		<!-- Arm base link -->
		<link name="${prefix}base_link">
			<visual>
				<geometry>
					<mesh filename="file://$(find openarm_description)/meshes/arm/visual/base.obj"
								scale="1 ${direction*1} 1"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="file://$(find openarm_description)/meshes/arm/collision/base.stl"/>
				</geometry>
			</collision>
			<inertial>
				<origin xyz="-0.0009483362816297526 ${direction*0.0001580207020448382} 0.03076860287587199"/>
				<mass value="1.1432284943239561"/>
				<inertia ixx="0.001128" ixy="-4e-06" ixz="-3.3e-05" iyy="0.000962" iyz="-7e-06" izz="0.00147"/>
			</inertial>
		</link>

		<!-- Link 1 -->
		<link name="${prefix}link1">
			<visual>
				<geometry>
					<mesh filename="file://$(find openarm_description)/meshes/arm/visual/link1.obj"
								scale="1 ${direction*1} 1"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="file://$(find openarm_description)/meshes/arm/collision/link1.stl"
								scale="1 ${direction*1} 1"/>
				</geometry>
			</collision>
			<inertial>
				<origin xyz="0.0011467657911800769 ${direction*3.319987657026362e-05} 0.05395284380736254"/>
				<mass value="1.1416684646202298"/>
				<inertia ixx="0.001567" ixy="-1e-06" ixz="-2.9e-05" iyy="0.001273" iyz="1e-06" izz="0.001016"/>
			</inertial>
		</link>

		<joint name="${prefix}joint1" type="revolute">
			<origin xyz="0.0 0.0 0.0625"/>
			<parent link="${prefix}base_link"/>
			<child link="${prefix}link1"/>
			<axis xyz="0 0 1"/>
			<xacro:if value="${direction == -1}">
				<limit effort="40" lower="-3.490659" upper="1.3962629999999998" velocity="16.754666"/>
			</xacro:if>
			<xacro:if value="${direction == 1}">
				<limit effort="40" lower="-1.396263" upper="3.490659" velocity="16.754666"/>
			</xacro:if>
		</joint>

		<!-- Link 2 -->
		<link name="${prefix}link2">
			<visual>
				<geometry>
					<mesh filename="file://$(find openarm_description)/meshes/arm/visual/link2.obj" scale="1 ${direction} 1"/>
				</geometry>
			</visual>
			<collision>
				<origin xyz="0.0301 0.0 -0.1225"/>
				<geometry>
					<mesh filename="file://$(find openarm_description)/meshes/arm/collision/link2.stl"
								scale="1 ${direction} 1"/>
				</geometry>
			</collision>
			<inertial>
				<origin xyz="0.00839629182351943 ${direction*-2.0145102027597523e-08} 0.03256649300522363"/>
				<mass value="0.2775092746011571"/>
				<inertia ixx="0.000359" ixy="1e-06" ixz="-0.000109" iyy="0.000376" iyz="1e-06" izz="0.000232"/>
			</inertial>
		</link>

		<joint name="${prefix}joint2" type="revolute">
			<xacro:if value="${prefix == ''}">
				<origin xyz="-0.0301 0.0 0.06"/>
			</xacro:if>
			<xacro:unless value="${prefix == ''}">
				<origin rpy="${direction*1.57079632679} 0 0" xyz="-0.0301 0.0 0.06"/>
			</xacro:unless>
			<parent link="${prefix}link1"/>
			<child link="${prefix}link2"/>
			<axis xyz="-1 0 0"/>
			<xacro:if value="${direction == -1}">
				<limit effort="40" lower="-3.3161253267948965" upper="0.17453267320510335" velocity="16.754666"/>
			</xacro:if>
			<xacro:if value="${direction == 1}">
				<limit effort="40" lower="-0.17453267320510335" upper="3.3161253267948965" velocity="16.754666"/>
			</xacro:if>
		</joint>

		<!-- Link 3 -->
		<link name="${prefix}link3">
			<visual>
				<geometry>
					<mesh filename="file://$(find openarm_description)/meshes/arm/visual/link3.obj" scale="1 ${direction} 1"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="file://$(find openarm_description)/meshes/arm/collision/link3.stl"
								scale="1 ${direction} 1"/>
				</geometry>
			</collision>
			<inertial>
				<origin xyz="-0.002104752099628911 ${direction*-0.0005549085042607548} 0.09047470545721961"/>
				<mass value="1.073863338202347"/>
				<inertia ixx="0.004372" ixy="1e-06" ixz="1.1e-05" iyy="0.004319" iyz="-3.6e-05" izz="0.000661"/>
			</inertial>
		</link>

		<joint name="${prefix}joint3" type="revolute">
			<origin xyz="0.0301 0.0 0.06625"/>
			<parent link="${prefix}link2"/>
			<child link="${prefix}link3"/>
			<axis xyz="0 0 1"/>
			<limit effort="27" lower="-1.570796" upper="1.570796" velocity="5.445426"/>
		</joint>

		<!-- Link 4 -->
		<link name="${prefix}link4">
			<visual>
				<geometry>
					<mesh filename="file://$(find openarm_description)/meshes/arm/visual/link4.obj"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="file://$(find openarm_description)/meshes/arm/collision/link4.stl"/>
				</geometry>
			</collision>
			<inertial>
				<origin xyz="-0.0029006831074562967 -0.03030575826634669 0.06339637422196209"/>
				<mass value="0.6348534566833373"/>
				<inertia ixx="0.000623" ixy="-1e-06" ixz="-1.9e-05" iyy="0.000511" iyz="3.8e-05" izz="0.000334"/>
			</inertial>
		</link>

		<joint name="${prefix}joint4" type="revolute">
			<origin xyz="-0.0 0.0315 0.15375"/>
			<parent link="${prefix}link3"/>
			<child link="${prefix}link4"/>
			<axis xyz="0 1 0"/>
			<limit effort="27" lower="0.0" upper="2.443461" velocity="5.445426"/>
		</joint>

		<!-- Link 5 -->
		<link name="${prefix}link5">
			<visual>
				<geometry>
					<mesh filename="file://$(find openarm_description)/meshes/arm/visual/link5.obj" scale="1 ${direction} 1"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="file://$(find openarm_description)/meshes/arm/collision/link5.stl"
								scale="1 ${direction} 1"/>
				</geometry>
			</collision>
			<inertial>
				<origin xyz="-0.003049665024221911 ${direction*0.0008866902457326625} 0.043079803024980934"/>
				<mass value="0.6156588026168502"/>
				<inertia ixx="0.000423" ixy="-8e-06" ixz="6e-06" iyy="0.000445" iyz="-6e-06" izz="0.000324"/>
			</inertial>
		</link>

		<joint name="${prefix}joint5" type="revolute">
			<origin xyz="0.0 -0.0315 0.0955"/>
			<parent link="${prefix}link4"/>
			<child link="${prefix}link5"/>
			<axis xyz="0 0 1"/>
			<limit effort="7" lower="-1.570796" upper="1.570796" velocity="20.943946"/>
		</joint>

		<!-- Link 6 -->
		<link name="${prefix}link6">
			<visual>
				<geometry>
					<mesh filename="file://$(find openarm_description)/meshes/arm/visual/link6.obj"
								scale="1 ${direction*1} 1"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="file://$(find openarm_description)/meshes/arm/collision/link6.stl"
								scale="1 ${direction*1} 1"/>
				</geometry>
			</collision>
			<inertial>
				<origin xyz="-0.037136587005447405 ${direction*0.00033230528343419053} -9.498374522309838e-05"/>
				<mass value="0.475202773187987"/>
				<inertia ixx="0.000143" ixy="1e-06" ixz="1e-06" iyy="0.000157" iyz="1e-06" izz="0.000159"/>
			</inertial>
		</link>

		<joint name="${prefix}joint6" type="revolute">
			<origin xyz="0.0375 0.0 0.1205"/>
			<parent link="${prefix}link5"/>
			<child link="${prefix}link6"/>
			<axis xyz="1 0 0"/>
			<limit effort="7" lower="-0.785398" upper="0.785398" velocity="20.943946"/>
		</joint>

		<!-- Link 7 -->
		<link name="${prefix}link7">
			<visual>
				<geometry>
					<mesh filename="file://$(find openarm_description)/meshes/arm/visual/link7.obj"
								scale="1 ${direction*1} 1"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="file://$(find openarm_description)/meshes/arm/collision/link7.stl"
								scale="1 ${direction*1} 1"/>
				</geometry>
			</collision>
			<inertial>
				<origin xyz="6.875510271106056e-05 ${direction*0.01266175250761268} 0.06951945409987448"/>
				<mass value="0.4659771327380578"/>
				<inertia ixx="0.000639" ixy="1e-06" ixz="1e-06" iyy="0.000497" iyz="8.9e-05" izz="0.000342"/>
			</inertial>
		</link>

		<joint name="${prefix}joint7" type="revolute">
			<origin xyz="-0.0375 0.0 0.0"/>
			<parent link="${prefix}link6"/>
			<child link="${prefix}link7"/>
			<axis xyz="0 ${direction*1} 0"/>
			<limit effort="7" lower="-1.570796" upper="1.570796" velocity="20.943946"/>
		</joint>

	</xacro:macro>

</robot>
