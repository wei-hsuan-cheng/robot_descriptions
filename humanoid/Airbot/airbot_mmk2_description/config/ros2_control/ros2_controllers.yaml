# This config file is used by ros2_control
controller_manager:
  ros__parameters:
    update_rate: 50  # Hz

    joint_state_broadcaster:
      type: joint_state_broadcaster/JointStateBroadcaster

    # 差速驱动控制器 - 用于轮子
    diff_drive_controller:
      type: diff_drive_controller/DiffDriveController

    # 双臂控制器 - 使用ocs2 arm controller
    ocs2_arm_controller:
      type: ocs2_arm_controller/Ocs2ArmController

# 差速驱动控制器配置
diff_drive_controller:
  ros__parameters:
    update_rate: 50  # Hz
    
    # 轮子关节
    left_wheel_names: ["lft_wheel_joint"]
    right_wheel_names: ["rgt_wheel_joint"]
    
    # 轮子间距
    wheel_separation: 0.3265  # 左右轮间距
    wheel_radius: 0.08401     # 轮子半径
    
    # 控制接口
    use_stamped_vel: false
    
    # 限制参数
    linear.x.has_velocity_limits: true
    linear.x.max_velocity: 1.0
    angular.z.has_velocity_limits: true
    angular.z.max_velocity: 1.0


ocs2_arm_controller:
  ros__parameters:
    # Joint configuration
    update_rate: 50  # Hz
    info_file_name: fixed_base
    joints:
      - slide_joint
      - left_joint1
      - left_joint2
      - left_joint3
      - left_joint4
      - left_joint5
      - left_joint6
      - right_joint1
      - right_joint2
      - right_joint3
      - right_joint4
      - right_joint5
      - right_joint6

    command_interfaces:
      - position
    state_interfaces:
      - position

    robot_name: airbot_mmk2

    # Control parameters
    home_pos: [ 0.0,
                0.0, 0.0, 0.715, 0.0, 0.0, 1.5708,
                0.0, 0.0, 0.715, 0.0, 0.0, -1.5708, ]
    rest_pos: [ 0.87,
                0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
                0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ]