<?xml version="1.0" ?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">

	<xacro:macro name="UnitreeG1Arm" params="name direction:=1">
		<!-- 
		Unitree G1 Arm Macro
		Parameters:
		- name: arm name prefix (e.g., "left", "right")
		- direction: 1 for right arm, -1 for left arm (for mirroring)
		-->

		<xacro:property name="prefix" value="${name + '_' if name else ''}"/>

		<!-- Shoulder Pitch Link -->
		<link name="${prefix}shoulder_pitch_link">
			<inertial>
				<origin xyz="0 ${direction*0.035892} -0.011628"/>
				<mass value="0.718"/>
				<inertia ixx="0.0004291" ixy="${direction*-9.2E-06}" ixz="6.4E-06"
								 iyy="0.000453" iyz="${direction*2.26E-05}" izz="0.000423"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/arm/shoulder_pitch.obj"
								scale="1 ${direction} 1"/>
				</geometry>
			</visual>
			<collision>
				<origin xyz="0 ${direction*0.04} -0.01" rpy="0 1.5707963267948966 0"/>
				<geometry>
					<cylinder radius="0.03" length="0.05"/>
				</geometry>
			</collision>
		</link>

		<!-- Shoulder Pitch Joint -->
		<joint name="${prefix}shoulder_pitch_joint" type="revolute">
			<origin xyz="0.0039563 ${direction*0.10022} 0.24778"
							rpy="${direction*0.27931} 5.4949E-05 ${direction*-0.00019159}"/>
			<parent link="torso_link"/>
			<child link="${prefix}shoulder_pitch_link"/>
			<axis xyz="0 1 0"/>
			<limit lower="-3.0892" upper="2.6704" effort="25" velocity="37"/>
		</joint>

		<!-- Shoulder Roll Link -->
		<link name="${prefix}shoulder_roll_link">
			<inertial>
				<origin xyz="-0.000227 ${direction*0.00727} -0.063243"/>
				<mass value="0.643"/>
				<inertia ixx="0.0006177" ixy="${direction*-1E-06}" ixz="8.7E-06"
								 iyy="0.0006912" iyz="${direction*-5.3E-06}" izz="0.0003894"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/arm/shoulder_roll.obj"
								scale="1 ${direction} 1"/>
				</geometry>
			</visual>
			<collision>
				<origin xyz="-0.004 ${direction*0.006} -0.053"/>
				<geometry>
					<cylinder radius="0.03" length="0.03"/>
				</geometry>
			</collision>
		</link>

		<!-- Shoulder Roll Joint -->
		<joint name="${prefix}shoulder_roll_joint" type="revolute">
			<origin xyz="0 ${direction*0.038} -0.013831" rpy="${direction*-0.27925} 0 0"/>
			<parent link="${prefix}shoulder_pitch_link"/>
			<child link="${prefix}shoulder_roll_link"/>
			<axis xyz="1 0 0"/>
			<limit lower="${-1.5882 if direction == 1 else -2.2515}"
						 upper="${2.2515 if direction == 1 else 1.5882}" effort="25" velocity="37"/>
		</joint>

		<!-- Shoulder Yaw Link -->
		<link name="${prefix}shoulder_yaw_link">
			<inertial>
				<origin xyz="0.010773 ${direction*-0.002949} -0.072009"/>
				<mass value="0.734"/>
				<inertia ixx="0.0009988" ixy="${direction*7.9E-06}" ixz="0.0001412"
								 iyy="0.0010605" iyz="${direction*-2.86E-05}" izz="0.0004354"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/arm/shoulder_yaw.obj"
								scale="1 ${direction} 1"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/arm/shoulder_yaw.obj"
								scale="1 ${direction} 1"/>
				</geometry>
			</collision>
		</link>

		<!-- Shoulder Yaw Joint -->
		<joint name="${prefix}shoulder_yaw_joint" type="revolute">
			<origin xyz="0 ${direction*0.00624} -0.1032"/>
			<parent link="${prefix}shoulder_roll_link"/>
			<child link="${prefix}shoulder_yaw_link"/>
			<axis xyz="0 0 1"/>
			<limit lower="-2.618" upper="2.618" effort="25" velocity="37"/>
		</joint>

		<!-- Elbow Link -->
		<link name="${prefix}elbow_link">
			<inertial>
				<origin xyz="0.064956 ${direction*0.004454} -0.010062"/>
				<mass value="0.6"/>
				<inertia ixx="0.0002891" ixy="${direction*6.53E-05}" ixz="1.72E-05"
								 iyy="0.0004152" iyz="${direction*-5.6E-06}" izz="0.0004197"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/arm/elbow.obj"
								scale="1 ${direction} 1"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/arm/elbow.obj"
								scale="1 ${direction} 1"/>
				</geometry>
			</collision>
		</link>

		<!-- Elbow Joint -->
		<joint name="${prefix}elbow_joint" type="revolute">
			<origin xyz="0.015783 0 -0.080518"/>
			<parent link="${prefix}shoulder_yaw_link"/>
			<child link="${prefix}elbow_link"/>
			<axis xyz="0 1 0"/>
			<limit lower="-1.0472" upper="2.0944" effort="25" velocity="37"/>
		</joint>

		<!-- Wrist Roll Link -->
		<link name="${prefix}wrist_roll_link">
			<inertial>
				<origin xyz="0.01713944778 ${direction*0.00053759094} 0.00000048864"/>
				<mass value="0.08544498"/>
				<inertia ixx="0.00004821544023" ixy="${direction*-0.00000424511021}"
								 ixz="0.00000000510599" iyy="0.00003722899093"
								 iyz="${direction*-0.00000000123525}" izz="0.00005482106541"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/arm/wrist_roll.obj"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/arm/wrist_roll.obj"/>
				</geometry>
			</collision>
		</link>

		<!-- Wrist Roll Joint -->
		<joint name="${prefix}wrist_roll_joint" type="revolute">
			<origin xyz="0.100 ${direction*0.00188791} -0.010"/>
			<axis xyz="1 0 0"/>
			<parent link="${prefix}elbow_link"/>
			<child link="${prefix}wrist_roll_link"/>
			<limit effort="25" velocity="37" lower="-1.972222054" upper="1.972222054"/>
		</joint>

		<!-- Wrist Pitch Link -->
		<link name="${prefix}wrist_pitch_link">
			<inertial>
				<origin xyz="0.02299989837 ${direction*-0.00111685314} -0.00111658096"/>
				<mass value="0.48404956"/>
				<inertia ixx="0.00016579646273" ixy="${direction*-0.00001231206746}"
								 ixz="0.00001231699194" iyy="0.00042954057410"
								 iyz="${direction*0.00000081417712}" izz="0.00042953697654"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/arm/wrist_pitch.obj"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/arm/wrist_pitch.obj"/>
				</geometry>
			</collision>
		</link>

		<!-- Wrist Pitch Joint -->
		<joint name="${prefix}wrist_pitch_joint" type="revolute">
			<origin xyz="0.038 0 0"/>
			<axis xyz="0 1 0"/>
			<parent link="${prefix}wrist_roll_link"/>
			<child link="${prefix}wrist_pitch_link"/>
			<limit effort="5" velocity="22" lower="-1.614429558" upper="1.614429558"/>
		</joint>

		<!-- Wrist Yaw Link -->
		<link name="${prefix}wrist_yaw_link">
			<inertial>
				<origin xyz="0.02200381568 ${direction*0.00049485096} 0.00053861123"/>
				<mass value="0.08457647"/>
				<inertia ixx="0.00004929128828" ixy="${direction*-0.00000045735494}"
								 ixz="0.00000445867591" iyy="0.00005973338134"
								 iyz="${direction*-0.00000043217198}" izz="0.00003928083826"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/arm/wrist_yaw.obj"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/arm/wrist_yaw.obj"/>
				</geometry>
			</collision>
		</link>

		<!-- Wrist Yaw Joint -->
		<joint name="${prefix}wrist_yaw_joint" type="revolute">
			<origin xyz="0.046 0 0"/>
			<axis xyz="0 0 1"/>
			<parent link="${prefix}wrist_pitch_link"/>
			<child link="${prefix}wrist_yaw_link"/>
			<limit effort="5" velocity="22" lower="-1.614429558" upper="1.614429558"/>
		</joint>

	</xacro:macro>

</robot>
