<?xml version="1.0" ?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">

	<xacro:macro name="UnitreeG1Leg" params="name direction:=1">

		<xacro:property name="prefix" value="${name + '_' if name else ''}"/>

		<!-- Hip Pitch Link -->
		<link name="${prefix}hip_pitch_link">
			<inertial>
				<origin xyz="0.002741 ${direction*0.047791} -0.02606"/>
				<mass value="1.35"/>
				<inertia ixx="0.001811" ixy="${direction*3.68E-05}" ixz="-3.44E-05"
								 iyy="0.0014193" iyz="${direction*0.000171}" izz="0.0012812"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/leg/hip_pitch.obj"
								scale="1 ${direction} 1"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/leg/hip_pitch.obj"
								scale="1 ${direction} 1"/>
				</geometry>
			</collision>
		</link>

		<!-- Hip Pitch Joint -->
		<joint name="${prefix}hip_pitch_joint" type="revolute">
			<origin xyz="0 ${direction*0.064452} -0.1027"/>
			<parent link="pelvis"/>
			<child link="${prefix}hip_pitch_link"/>
			<axis xyz="0 1 0"/>
			<limit lower="-2.5307" upper="2.8798" effort="88" velocity="32"/>
		</joint>

		<!-- Hip Roll Link -->
		<link name="${prefix}hip_roll_link">
			<inertial>
				<origin xyz="0.029812 ${direction*-0.001045} -0.087934"/>
				<mass value="1.52"/>
				<inertia ixx="0.0023773" ixy="${direction*-3.8E-06}" ixz="-0.0003908"
								 iyy="0.0024123" iyz="${direction*1.84E-05}" izz="0.0016595"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/leg/hip_roll.obj"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/leg/hip_roll.obj"/>
				</geometry>
			</collision>
		</link>

		<!-- Hip Roll Joint -->
		<joint name="${prefix}hip_roll_joint" type="revolute">
			<origin xyz="0 ${direction*0.052} -0.030465" rpy="0 -0.1749 0"/>
			<parent link="${prefix}hip_pitch_link"/>
			<child link="${prefix}hip_roll_link"/>
			<axis xyz="1 0 0"/>
			<limit lower="${-0.5236 if direction == 1 else -2.9671}"
						 upper="${2.9671 if direction == 1 else 0.5236}" effort="88" velocity="32"/>
		</joint>

		<!-- Hip Yaw Link -->
		<link name="${prefix}hip_yaw_link">
			<inertial>
				<origin xyz="-0.057709 ${direction*-0.010981} -0.15078"/>
				<mass value="1.702"/>
				<inertia ixx="0.0057774" ixy="${direction*-0.0005411}" ixz="-0.0023948"
								 iyy="0.0076124" iyz="${direction*-0.0007072}" izz="0.003149"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/leg/hip_yaw.obj"
								scale="1 ${direction} 1"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/leg/hip_yaw.obj"
								scale="1 ${direction} 1"/>
				</geometry>
			</collision>
		</link>

		<!-- Hip Yaw Joint -->
		<joint name="${prefix}hip_yaw_joint" type="revolute">
			<origin xyz="0.025001 0 -0.12412"/>
			<parent link="${prefix}hip_roll_link"/>
			<child link="${prefix}hip_yaw_link"/>
			<axis xyz="0 0 1"/>
			<limit lower="-2.7576" upper="2.7576" effort="88" velocity="32"/>
		</joint>

		<!-- Knee Link -->
		<link name="${prefix}knee_link">
			<inertial>
				<origin xyz="0.005457 ${direction*0.003964} -0.12074"/>
				<mass value="1.932"/>
				<inertia ixx="0.011329" ixy="${direction*4.82E-05}" ixz="${direction*-4.49E-05}"
								 iyy="0.011277" iyz="${direction*-0.0007146}" izz="0.0015168"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/leg/knee.obj"
								scale="1 ${direction} 1"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/leg/knee.obj"
								scale="1 ${direction} 1"/>
				</geometry>
			</collision>
		</link>

		<!-- Knee Joint -->
		<joint name="${prefix}knee_joint" type="revolute">
			<origin xyz="-0.078273 ${direction*0.0021489} -0.17734" rpy="0 0.1749 0"/>
			<parent link="${prefix}hip_yaw_link"/>
			<child link="${prefix}knee_link"/>
			<axis xyz="0 1 0"/>
			<limit lower="-0.087267" upper="2.8798" effort="139" velocity="20"/>
		</joint>

		<!-- Ankle Pitch Link -->
		<link name="${prefix}ankle_pitch_link">
			<inertial>
				<origin xyz="-0.007269 0 0.011137"/>
				<mass value="0.074"/>
				<inertia ixx="8.4E-06" ixy="0" ixz="-2.9E-06" iyy="1.89E-05" iyz="0" izz="1.26E-05"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/leg/ankle_pitch.obj"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/leg/ankle_pitch.obj"/>
				</geometry>
			</collision>
		</link>

		<!-- Ankle Pitch Joint -->
		<joint name="${prefix}ankle_pitch_joint" type="revolute">
			<origin xyz="0 ${direction*-9.4445E-05} -0.30001"/>
			<parent link="${prefix}knee_link"/>
			<child link="${prefix}ankle_pitch_link"/>
			<axis xyz="0 1 0"/>
			<limit lower="-0.87267" upper="0.5236" effort="35" velocity="30"/>
		</joint>

		<!-- Ankle Roll Link -->
		<link name="${prefix}ankle_roll_link">
			<inertial>
				<origin xyz="0.026505 0 -0.016425"/>
				<mass value="0.608"/>
				<inertia ixx="0.0002231" ixy="${direction*2E-07}" ixz="8.91E-05"
								 iyy="0.0016161" iyz="${direction*-1E-07}" izz="0.0016667"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="file://$(find unitree_g1_description)/meshes/leg/ankle_roll.obj"/>
				</geometry>
			</visual>
			<collision>
				<origin xyz="-0.05 0.025 -0.03"/>
				<geometry>
					<sphere radius="0.005"/>
				</geometry>
			</collision>
			<collision>
				<origin xyz="-0.05 -0.025 -0.03"/>
				<geometry>
					<sphere radius="0.005"/>
				</geometry>
			</collision>
			<collision>
				<origin xyz="0.12 0.03 -0.03"/>
				<geometry>
					<sphere radius="0.005"/>
				</geometry>
			</collision>
			<collision>
				<origin xyz="0.12 -0.03 -0.03"/>
				<geometry>
					<sphere radius="0.005"/>
				</geometry>
			</collision>
		</link>

		<!-- Ankle Roll Joint -->
		<joint name="${prefix}ankle_roll_joint" type="revolute">
			<origin xyz="0 0 -0.017558"/>
			<parent link="${prefix}ankle_pitch_link"/>
			<child link="${prefix}ankle_roll_link"/>
			<axis xyz="1 0 0"/>
			<limit lower="-0.2618" upper="0.2618" effort="35" velocity="30"/>
		</joint>

	</xacro:macro>

</robot>
